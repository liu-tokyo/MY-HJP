# 12. 常见问题及处理方法

## 12.1. 电源指示灯不亮

- 查看电源线是否连接可靠，开关是否打开。

- 查看电源插座内（下侧）保险是否烧毁。如果烧毁，插座内备有一个备用保险。

## 12.2. 功放无法打开

- 检查串口与车号主机是否联接可靠。

- 使用配套软件进行测试，并确保软件中设置的串口与实际联接车号主机的串口为同一个串口，具体参考`配套软件`部分。

- 如果不清楚车号主机串口的波特率，请用配套软件自动检测车号主机串口的波特率，具体参考`配套软件`部分。

- 如果是用串口调试程序进行测试，请注意发送指令的大小写，具体参考`通讯协议`部分。

## 12.3. 轨道衡主机应该在什么时间打开和关闭功放

与轨道衡配套使用的车号识别系统，在第一辆车上秤的时间向车号主机发送一次`打开功放`指令即可。当轨道衡判断整列车全部通过后向车号主机发送一次`关闭功放`指令即可。

## 12.4. 轨道衡主机应该在什么时间匹配车号数据

与轨道衡配套使用的车号识别系统，在每节车通过轨道衡台面时（第三轴或第四轴下秤时）匹配车号数据。在这个时刻秤重数据已计算完毕，恰好可以提取车号标签数据相匹配。如果天线安装在秤台正中，则第四轴下秤时读取车号信息比较可靠，因为这时车号标签已完全通过读取区域。如果天线安装在秤台一侧，则第三轴下秤时读取车号信息比较可靠，在这个时刻读取，会损失一定的车号读取区间，但可以避免下一节的车号覆盖上一节车号的现象。

## 12.5. 识别不到标签信息或识别距离很小

- 检查功放是否打开。功放打开后，功放指示灯亮。

- 检查天线电缆是否联接可靠。

- 注意天线附近是否有遮挡。在室内测试时，请尽可能将天线置于较开阔的地方。如果将天线置于一个狭小的空间，电磁波的发射和反射会受到影响，标签仅能在很靠近天线时才能读取到。

- 检查射频电缆、射频电缆接头是否受潮。

## 12.6.  液晶屏有收到标签的显示，串口没有数据

- 检查串口波特率设置。

- 如果计算机与车号主机串口2相联，则车号主机仅在收到`读取`指令后才上传车号标签信息。具体请参考`通讯协议`部分。

## 12.7. 串口打开失败

`车号识别系统`程序启动时，或在点击`打开串口`时，弹出`串口x已打开`，表示有其它的应用程序已打开此串口。此时应关闭使用此串口的应用程序，点击`打开串口`按钮。如果弹出`无效串口号`，则表明串口号选择不正确。此时应确认与车号主机联接的计算机串口号，正确的设置串口号后，点击`打开串口`按钮。

## 12.8. 串口通讯时好时坏

车号主机的串口部分是带有硬件FIFO的ARM处理器实现的，并经过长期严格的测试，在各种通讯速度下都可以实现可靠的双工数据传输。如果您遇到串口通讯不稳定的情况，建议从以下方面查找问题：

- 串口线是否过长？

  建议不要使用超过3米的串口线。串口线加长会降低串口通讯的可靠性，更重要的是，串口设的标准不适用于长距离数据传输，计算机串口通常没有浪涌保护功能，传输线加长后，线上感应的浪涌电流容易烧毁串口芯片。对于长距离传输的情况，建议使用一对研华科技的ADAM4520模块，并使用9600的波特率。

- 您使用了232转485模块了吗？

  如果计算机与车号主机距离较远，建议使用一对研华科技的ADAM4520模块。如果使用其它的转接模块，一定要使用有源的。使用转接模块转接后，建议使用9600的波特率。我们分析过目前市面上多种232转485模块的工作原理，在485芯片收发状态的转换控制完全靠硬件实现，大多存在一定的时间延迟，在高速通讯的情况下，车号主机收到指令后立即回应，485收发状态未来得及转换时，容易发生数据丢失。

- 是否使用USB转串口的转接线？

  据我们测试，目前市面上的USB转串口转接线的可靠性很低，在做连续数据传输和高速数据传输时数据丢失现象严重。不建议使用USB转串口的转接线。如果必需使用，建议使用9600的波特率。

- 您在使用`串口调试助手`吗？

  如果您在使用`串口调试助手`调试车号，可能会遇到一些不稳定的情况。`串口调试助手`是目前使用比较广泛的一个串口设备调试软件，但据我们测试，在高速连续数据传输的情况下经常出现异常现象。建议使用`ComTools2.0`软件进行调试，使用起来比`串口调试助手`方便，并经过我们长期测试，未发现异常现象。在附带的光盘中有此程序。

- 您在使用`MSComm`控件开发应用程序吗？

  如果您在使用`MSComm`控件开发应用程序，或许会发现有时OnComm事件不能正常响应。这是`MSComm`控件的bug。可以通过加入一个Timer控件，用Timer事件周期性查询MSComm控件是否有接收到数据的方法解决。

## 12.9. 波特率检测失败

在使用`车号识别系统`程序时，如果波特率检测不成功，会弹出`波特率检测失败！`的对话框。请检查检查窗口左上方`计算机串口设置`中`串口号`中设置值与联接车号主机的计算机串口的串口号是否一致。如果不一致，关闭串口后，重新设置串口号，再打开串口。

## 12.10. 每次启动程序都需要重设串口号

`车号识别系统`程序安装后默认的串口号为串口1。如果连接车号主机的计算机串口不是串口１，可以修改`车号识别系统`的配置文件。这样启动程序时就可以自动打开联接车号主机的串口了。有关配置文件的详细内容，请参考`配置文件说明`部分。