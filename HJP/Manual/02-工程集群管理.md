
# 工程集群管理

---
## 目录

- [工程集群管理](#工程集群管理)
  - [目录](#目录)
  - [1、工程分类](#1工程分类)
  - [2、工程管理](#2工程管理)
    - [2.1 工程追加](#21-工程追加)
    - [2.2 工程删除](#22-工程删除)
    - [2.3 工程一览](#23-工程一览)
    - [2.4 设置当前工程](#24-设置当前工程)

---

针对工程集群进行管理。

通过集群管理，把原来分布在多台服务器中的功能，可以发布在一台服务器中（服务器端程序需要根据这一要求进行相应的修改）。

## 1、工程分类

- 针对服务器端功能，定义为如下工程分类：

  | No.  | 工程分类   | 说明                                                         |
  | ---- | ---------- | ------------------------------------------------------------ |
  | 1    | 0:车位车号 | 针对车位、车号等数据进行采集，包括后续的数据传输等。         |
  | 2    | 1:线阵采集 | 针对线阵相机的图像数据进行采集，包括后续的数据传输等。       |
  | 3    | 2:本地存储 | 对采集到的数据进行处理，把车辆图像及相关信息传输到服务器端。 |
  | 4    | 3:数据服务 | 对客户端提供数据服务，把图像处理结果反应到数据库中。         |
  | 5    | 4:面阵管理 | 截取来车时间内的面阵视频图像，包括后续数据传输等。           |

  ※ 后续超限数据采集会设置新的功能编号。

## 2、工程管理

针对工程进行追加、删除、启动、停止、配置等操作。

### 2.1 工程追加

- 通过如下指令，添加一个新的工程到集群中：

  ```sh
  hcloud projects add
  ```

  新追加的工程默认为`当前工程`，随后可以针对该工程进行详细处理。

### 2.2 工程删除

- 通过如下指令，删除工程集群中的最后一项工程。

  ```sh
  hcloud projects remove
  ```

  **注意**：不是删除当前工程，而是删除集群中的最后一个工程。

### 2.3 工程一览

- 通过如下指令，可以浏览工程集群中的所有工程信息：

  ```sh
  hcloud projects list
  ```

- 结果信息大致如下：

  ```sh
   货检系统云管理 - V1
   - 编号    状态        功能区分       自动启动  数据输出目录
   -   1   0:停止      0:车位车号        1:允许   PRJ_001\CARS_IMG
   -   2   0:停止      1:线阵相机[右侧]  0:禁止   PRJ_002\CARS_IMG
   -  *3   0:停止      3:数据服务        1:允许   PRJ_003\CARS_IMG
  ```

  编号前面有`*`标记的是当前目录。

### 2.4 设置当前工程

- 通过如下指令，设置当前工程：

  ```sh
  hcloud projects config -pid=2
  ```

  把编号为**2**的工程设置为当前工程。

- 设置后执行，可以通过工程一览查看变化情况：

  ```
   货检系统云管理 - V1
   - 编号    状态        功能区分       自动启动  数据输出目录
   -   1   0:停止      0:车位车号        1:允许   PRJ_001\CARS_IMG
   -  *2   0:停止      1:线阵相机[右侧]  0:禁止   PRJ_002\CARS_IMG
   -   3   0:停止      3:数据服务        1:允许   PRJ_003\CARS_IMG
  ```

  编号为2的工程，前面出现了`*`标志，代表该工程为当前工程。

























