# 系统存在问题列表

## 1. 敬业站货检问题列表

| 序号 | 报告日期   | 问题端 | 问题描述                       | 拟解决办法                   | 结果 | 备注                     |
| :--: | ---------- | ------ | ------------------------------ | ---------------------------- | ---- | ------------------------ |
|  1   | 2024.08.16 | 作业线 | 图像两侧分辨率低               | 分 3 张抓拍，分段显示        |      | 应该是 2 张              |
|  2   | 2024.08.16 | 〃     | 多拍，漏拍                     | 修改抓拍逻辑                 |      |                          |
|  3   | 2024.08.16 | 货物线 | 无车号数据                     | 修改程序对应`远睿通`车号设备 |      |                          |
|  4   | 2024.08.16 | 〃     | 反方向过车数据处理不好         | 过滤反方向过车               | ✅    | 通过设置可以过滤反向数据 |
|  5   | 2024.08.16 | 〃     | 图像变换出现颜色混乱，处理卡住 | 现场调整光源和相机的位置     |      | 至少需要两人             |

## 2. 大秦接发车问题统计

| 序号 | 报告日期   | 问题端       | 问题描述                             | 解决方案                                         | 结果 | 备注                                           |
| :--: | ---------- | ------------ | ------------------------------------ | ------------------------------------------------ | ---- | ---------------------------------------------- |
|  1   | 2024.08.16 | 车务客户端   | 车站列表加载慢                       | 使用FTP put测试网速                              | ※1   |                                                |
|  2   | 2024.08.16 | 〃           | 车站图像加载慢                       | 电话确认光纤链路，设置专线                       | ※1   | 测试合适的质量因子                             |
|  3   | 2024.08.16 | 〃           | 客户端界面闪退                       |                                                  | ※1   | 虚拟机测试没有出现该问题，可能是网络不畅造成   |
|  7   | 2024.08.16 | 车站采集处理 | 车号连接失败                         | 增加连接查询，设计合理模块重启逻辑               | ✅    | 根据握手信号，重启该模块                       |
|  8   | 2024.08.16 | 〃           | 相机连接失败                         | 增加设备是否可达的检测，设计模块重启逻辑         |      |                                                |
|  9   | 2024.08.16 | 〃           | 相机数量不一致，导致该列车变换失败   | 修改程序，跳过处理图像数量差别大的相机           |      |                                                |
|  10  | 2024.08.16 | 〃           | 图像变换速度慢                       | 调整图像处理逻辑：边采集边变换                   |      | 后续针对大秦的变换进行优化，采集的同时进行变换 |
|  11  | 2024.08.16 | 〃           | 图像上传速度慢                       | 采用多线程传输                                   |      | 测试合适的质量因子                             |
|  12  | 2024.08.16 | 〃           | 相机丢帧、丢图                       | 现场处理，网线跳过防雷模块                       | ✅    |                                                |
|  13  | 2024.08.16 | 车站终端     | 系统内网，无法实现图像推送和查询推送 | 每站增加路由器，设置端口映射，使各站终端网络可达 |      | 用路由器可能比较简单，采用比较便宜的路由器即可 |

- **※1** 估计是网速问题，画面启动需要加载 12 张图片，每张图片的大小约为 3.5MB，合计为 42MB，如果网速不行，显示速度很慢；  
  还有一个问题，数据库连接的 Timeout 超时默认是 10 秒钟，如果出现超时，也可能导致该问题。  
  总之，一旦网络速度慢的话，可能导致很多不可知的问题。所以需要解决网速问题。车务段和各个车站之间，应该有空余的光纤，尽量建立专用网络，不要使用公用网络。公用网络中可能存在比较老旧的交换机，SWAP能力有限的话，很容易导致网络不畅的问题。